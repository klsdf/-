# 基本概念

## OSI 模型

- OSI 开放系统互连参考模型 (Open System Interconnection)

- ISO组织于1984年提出开放系统互连参考模型,

- 上面三层是资源子网,用于数据处理

- 下面三层是通信子网,用于数据通信

  

### OSI七层模型

<ol reversed="reversed">
  <span style="color:red">资源子网<span>
    <li>应用层(application layer)</li>
    <li>表示层 (presentation layer)</li>
    <li>会话层 (session layer)</li>
  <span style="color:black">沟通两者<span>
 		<li>传输层 (transport layer)</li>
  <span style="color:blue">通信子网<span>
    <li>网络层 (network layer)</li>
    <li>数据链路层 (data link layer)</li>
    <li>物理层 (physical layer)</li>
</ol>
### 分层的原则

- 各层相互独立,每层只实现一种相对独立的功能
- 上层单向使用下层提供的服务
- **水平协议,垂直服务**



## 混合模型

我学的是这种模型,中国教材还有外国那本权威教材都用的这个模型,虽然我自己是不理解有啥好啦.

<ol reversed="reversed">
    <li>应用层(application layer)</li>
 		<li>传输层 (transport layer)</li>
    <li>网络层 (network layer)</li>
    <li>数据链路层 (data link layer)</li>
    <li>物理层 (physical layer)</li>
</ol>
## 专业术语

### 信道

指的是信息传输的媒介,比如说网线,电话线什么的.

### 吞吐量

表示单位时间内通过某个接口(或信道)的数据量

### 时延

指数据(报文/分组/比特流)从网络一段传送到另一端所需的时间,也叫延迟,单位是s

一个完整的时延,包括以下的组成

1. 发送时延(传输时延):

   从发送第一个bit到最后一个bit所需的时间

2. 传播时延:

   取决于电磁波的传播速度和链路长度

3. 排队时延:

   等待输出/输入链路可用

4. 处理时延: 

   检错,找路由器出口

一般的高速链路指的是高发送速率,剩下的时延不可改变.

### 时延带宽积

$$ 时延带宽积(bit) = 传播时延(s)*带宽(bit/s)  $$

类似于路程=速度*时间,时延带宽积指的是A现在向B一直以某bit/s的速度发送bit,到第一个数据到B为止,一共发送了传播时延s,

那么现在在链路中存放的未到达的数据就是时延带宽积,也就是说反映了从A到B这个链路中,可以储存多少bit的数据.

### 往返时延 RTT

就是说发送方发送一个数据,得到对方响应所需的时间.

RTT=传播时延*2+对方处理时间

# 1.物理层

## 任务

物理层是最底层的层,解决的都是非常具象的问题.物理层旨在实现比特流的透明传输.

所谓这个比特流的透明传输,实际上就是说,物理层必须保证,不管你电脑发什么样子的二进制组合,我都必须确保这个数据能在网线里面传递.

## 极限bit传输率

### 专业术语

#### 码元

就是指信息转化为2进制的信息量,比如说二进制的$(1010011)_2$一个0或者1就是一个码元,而对于十进制来说,1234567890,一个1或者2,3就是一个码元.虽然码元代表的是最基本的信息量,但是所包含的bit并不一定相同,这是因为数据的传输都要变成二进制传输的.

比如说二进制的100011,码元就是1bit,因为你一个基本的信息就是0或者1,刚好只占1bit.而对于10进制来说,我发一个6,那你用二进制传过去是不是就变成了110,那你是不是就是3bit的信息量了.所以说想看一个10进制的数转到二进制有几位,可以看一波计算机导论,如果你忘了,我这再给你说一下:

$$ 10进制转2进制位数=\lceil log_2(10进制的数据) \rceil$$

比如说 10进制的6占 $log_2(6)=\lceil 2.585\rceil=3$,也就是3位二进制数.

继续上面的,10进制数,一共有10种数,在传输中就有10种电信号,那么就称这种码元为10进制码元,20种电信号就是20进制码元.其实这个与进制并没有严格关系,是按照电信号种类决定的,不过名字叫个几进制码元罢了.

但是进制数不代表bit数,比如说30进制码元,那么就有30种电信号,那么一定需要$log_2(30)=\lceil 4.9069\rceil=5$位 二进制数表示.那么1个30进制码元的bit数就有5个bit

#### 码元速率-波特

指的就是码元的传输速率,其定义为每秒钟传送码元的数目,老铁一秒扣了100个666,那你码元速度就是300码元每秒,我们用单位"波特",表示码元的传输速率,符号为Baud.

$1 Baud = 1 码元/秒$ 

#### 比特率

也叫数据传输率,一般就是指比特传输的速率,单位是 b/s ,kb/s ,Mb/s ,Gb/s ,Tb/s.这里要和波特区分一下,因为码元所携带的信息量不一定是1bit,所以 1Baud也不一定是1bit/s.

#### 带宽

指的是单位时间在网络上传输数据的最高数据传输率,很好理解,反正我家就没有上过10Mb/s,明明买的千兆带宽.

#### 信道带宽

指的是能通过的信道能通过的最高频率和最低频率之差,也就是可以通过的信号频率范围.

### 奈氏准则

#### 码间串扰

信号会失真,虽然都是废话,但是这个真的很重要,影响失真的一般有以下几个因素:

1. 码元传输速率

2. 信号传输距离

3. 噪声干扰

4. 传输媒体质量

虽然都是失真,但是也分轻重缓急,还记得刚才的信道带宽是什么吗,不觉得加一个这个非常突兀吗?实际上并不是所有信号都能在信道上畅通无阻的,如果频率太低能量就太少,很快就会被消耗.如果能量太高就会发生**码间串扰**失真.

接下来我们好好说说码间串扰.假如你发送码元的频率很高,也就是说码元传输速率非常高,那么就可能导致接收方收到的码元都挤在一起完全无法取分谁是谁.就好比你看电视,一个一个看都是静态的,假如现在连续播放这些图片,就好像这个人物动起来了一样,实际上图片都是静态的,但是他们数据传输的实在是太快了,以至于你根本分不清谁是谁.码间串扰的原理当然不是这个,但是可以这样理解.

实际上码间串扰是因为电信号在传播的时候都是波形的,离得太近就会发生波的叠加,导致信号不可认.

#### 奈氏准则的引出

这个问题在当时困扰了很多的人,为了解决这个问题,一个叫奈奎斯特的巨佬站了出来.他说:在理想低通（无噪声，带宽受限）条件下，为了避免码间串扰，

​																	$$极限码元传输速率= 2W Baud$$，

其中W是信道带宽，注意此处的带宽单位是Hz。

大佬说话都喜欢加点专业名称,但是咱可不是大佬,还是说的清楚点比较好,那这句话什么意思呢?就是说啊,我现在找一个理想的信道,设一个频率值,保证比这个频率值低的信号都能传过来,而高频率的信号都被过滤掉.在这样一种理想信道的情况下,码元最高传输速率就是两倍的信道带宽.

#### 奈氏准则表示数据率

虽然奈氏准则描述的是码元传输极限速率,但是码元本身可以计算所对应的bit,所以可以间接表示数据传输速率

$$极限码元传输速率= 2W Baud= 2Wlog_2(几种电信号)$$

举个例子吧:
在无噪声的情况下，若某通信链路的带宽为3kHz，使用的是10进制码元(10种电信号)，则该通信链路的最大数据传输率是多少?

1. 首先需要计算极限码元速率

   $$极限码元传输速率= 2W Baud= 2 \times 3000= 6000 Baud$$

2. 然后把Baud 换算成bit/s,此时需要确定10进制码元有几bit

   $log_2(10)=\lceil 3.3219\rceil=4$

3. 然后转换

   $6000Baud = 4\times 6000bit/s =24000bit/s $
   
   

### 香农定理

#### 信噪比

刚才奈奎斯特大佬给出了码元极限传输速率,现在并没有给出极限的bit传输速率,比如说我一下子整一个1024进制,那你一个码元就占10bit,这样下去总不可能bit传输速率无穷大吧?

好在信息论泰斗香农研究了这个问题,他发现,噪声在信息传递中扮演者非常非常重要的角色,如果像奈奎斯特那样不考虑噪声,那么总是很难计算实际的传输率.他还发现,噪声的影响是相对的,虽然你有噪声,但是我信号的频率你噪声的影响就越小,因此**信噪比**就是决定噪声影响的重要因素.

信噪比=信号平均功率/噪声平均功率,常记为S/N，并用分贝（dB）作为度量单位，即:

​																					$$ 信噪比(dB) = 10log_{10}(\frac{S}{N})$$

之所以转换一下,是因为S/N的值往往特别大,需要变小.

#### 香农公式

接下来就是公式本体了:在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值,公式为:

$$信道极限传输速率=Wlog_2(1+\frac{S}{N})$$

光看这个可能难以理解,我们举个例子吧:

电话系统的典型参数是信道带宽为3000Hz，信噪比为30dB，则该系统最大数据传输速率是多少?

1. 首先计算S/N

   $$30dB=10log_{10}(\frac{S}{N}) $$

   $$\frac{S}{N}=1000$$

2. 然后计算极限传输速率

   $$极限速率=3000log_2(1+1000)\approx 30kb/s$$

#### 推论

1. 信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了。
3. 只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输。
4. 香农定理得出的为极限信息传输速率，实际信道能达到的传输速率要比它低不少。
5. 从香农定理可以看出，若信道带宽W或信噪比s/N没有上限〈不可能），那么信道的极限信息传输速率也就没有上限。

### 两个公式的对比

学完上面的两条公式,很多人就会迷了,这两个也太像了吧,到底有啥区别呢?现在来整体总结一下

#### 奈氏准则

1. 考虑的是码元传播中自身发生的干扰.

2. $理想低通信道下的极限数据传输率=2Wlog_2(N)$,其中N指的是N种电信号,也就是N进制码元,W指信道带宽

3. 要想提高数据率，就要提高带宽/采用更好的编码技术。

#### 香农定理.

1. 考虑的是外界噪声的影响.

2. $信道的极限数据传输速率=Wlog_2(1+\frac{S}{N})$,其中$\frac{S}{N}$指信噪比,W指信道带宽
3. 要想提高数据率，就要提高带宽/信噪比。



实际中极限传输速率由二者共同决定,举个例子:

二进制信号在信噪比为127:1的4kHz信道上传输，最大的数据速率可达到多少?

首先算奈氏准则:

$max1=2\times 4000 \times log_2(2) =8000bit/s$

然后是香农定理:

$max2=4000\times log_2(1+127)=28000bit/s$

然后$maxTrue=min(max1,max2)=8000bit/s$

## 编码与调制

### 基带信号与宽带信号

- 基带信号(数字信号):就是原本的信号,比如图片数据,视频数据.

- 宽带信号(模拟信号):将基带信号进行调制后形成的频分复用模拟信号,所谓调制就是把基带信号的频率范围调高.宽带信号也就是经过调频后的基带信号。

现在这样说大家肯定一脸懵逼,不着急,接着看就知道了.

- 在传输距离较近时，计算机网络采用基带传输方式(近距离衰减小，从而信号内容不易发生变化),

- 在传输距离较远时，计算机网络采用宽带传输方式（远距离衰减大，即使信号变化大也能最后过滤出来基带信号）.

现在我想大家应该明白这是什么意思了吧,就跟高中电路一样,低压电损耗太大,必须加压才能远距离传输,但是你家如果自己用发电机发电,就没必要加压了,直接用就行.

- **将数字信号或模拟信号转化为数字信号的技术称为编码**
- **将数字信号或模拟信号转化为模拟信号的技术成为调制**

### 数字信号调编码为数字信号

<img src="img/image-20200908173834316.png" alt="image-20200908173834316" style="zoom:67%;" />

- 非归零编码:跟二进制数据保持一致,但是如果出现连续的0或1,就会变成一条直线,完全无法区分.
- 归零编码:每次接收数据1后,在一码元内变为0.同样的,0太多也看不清.
- 反向不归零编码:信号电平翻转表示o，信号电平不变表示1。
- 曼彻斯特编码:将一个码元分成两个相等的间隔，前一个间隔为低电平,后一个间隔为高电平表示码元1;码元0则正好相反。也可以采用相反的规定。该编码的特点是在每一个码元的中间出现电平跳变，位中间的跳变既作时钟信号（可用于同步），又作数据信号，但它所占的频带宽度是原始的基带宽度的两倍。
- 差分曼彻斯特编码:如果为1,前半部分和上一个后半部分相同,为0则和上一个的后半部分相反(**同1异0**).常用于局域网传输.

### 数字信号调制为模拟信号

一般把数字信号变成模拟信号就下面几种,一目了然,不言而喻.

<img src="img/image-20200908181521053.png" alt="image-20200908181521053" style="zoom:67%;" />

### 模拟信号编码为数字信号

这个生活中最常见,比如说平时录音,就是把你的声波信号转化成二进制数据.这其中有三个步骤:

1. 抽样:对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号能无失真地代表被抽样的模拟数据，要使用采样定理进行采样: $f_{采样频率}\geqslant2f{信号最高频率}$
2. 量化:把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量。
3. 编码:把量化的结果转为二进制编码.

### 模拟信号调制为模拟信号

为了实现传输的有效性，可能需要较高的频率。这种调制方式还可以使用频分复用技术，充分利用带宽资源。在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式;模拟的声音数据是加载到模拟的载波信号中传输的。

# 2.数据链路层

数据链路层是管理点到点的数据传输问题,而网络层是端到端的.

点到点就是指路由器结点之间,而端到端是指主机与主机之间.

## 任务

为网络层提供服务,

## 差错控制

将差错控制的任务交给数据链路层,可以在路由器处就发现数据出错,不用等到数据到了目标主机再去检查错误,可以节省资源.

详情内容请看我写的<计算机组成原理>中数据校验一节.

## 流量控制

这个很容易理解,你吃饭的时候,是不是吃一口夹一筷子啊.你这边没咽完,夹了也吃不下;同样的,光咽不夹那你吃个屁啊.计算机网络也有这种情况,两边路由器传输数据太快太慢都不行,但是计算机网络可不是人,他不管你咽下去没有,只管可劲传输.为了控制数据的流量,人们不得已想出一系列流量控制协议.

### 停止等待协议

每次发送完一个帧就停止发送,等待对方回应,收到确认后再发送下一个帧.



### 后退N帧协议(GBN)

### 选择重传协议(SR)

# 3.网络层

## 任务

网络层的任务是什么?网络层负责的是端到端的数据传输,这点毫无疑问.但是究竟是怎样的传输呢?

以Internet社团为代表的阵营认为,网络层仅仅负责发送数据包就可以,剩下的不用管.(实际上他们最终获得了胜利),另一派以电话公司为代表则认为网络层应该负责可靠传输,也就是先建立一个虚拟的连接,然后用这个虚拟的电路进行通信.

其实这两种思想都为计算机网络带来了重大贡献,没有优劣,所以请带着敬意去学习他们吧.

<img src="img/image-20200905131814922.png" alt="image-20200905131814922" style="zoom:50%;" />



## 网络层的两种网络

就如同上文所述,对网络层服务的两种诠释带来了两种网络

### 数据报网络(datagram network)

你的主机首先把数据包发送给你家的路由器,之后就麻烦了,路由器会通过路由算法,把你的数据包直接拆散,然后发给与它相连的若干路由器,也就是说路径非常随机,有的数据包可能绕很远,,有的则很快就能送到.

这也代表着在进行一些实时流量的服务时(视频聊天什么的),网络服务并不好.但是这种网络非常稳,就算中间有几个路由器坏了也完全不影响正常使用.

### 虚电路网络(virtual circuit network)

虚电路顾名思义,通信之前先建立一条虚拟的连接,为了避免像数据报网络一样,为每个数据包确定路径.虚电路网络首先会去找到目标主机,然后把中间一条路径确定下来,保存在中间路由器的表中.之后数据传输就会非常快,网络质量也非常好.但是建立虚电路非常耗费资源,而且如果这个路径中,有一台路由器崩溃,那么整个链接都会断掉,而且会丢失路由器内存中的数据.

### 对比

| 问题 | 数据报网络 | 虚电路网络 |
| ---- | ---------- | ---------- |
|      |            |            |
|      |            |            |
|      |            |            |

## 网络互联的设备

中问设备又称为中问系统或中继(relay)系统。

- 物理层中继系统:转发器(repeater)。
- 数据链路层中继系统:网桥或桥接器(bridge)。
- 网络层中继系统:路由器(router)。
- 网络层以上的中继系统:网关(gateway)。



## IP地址

我们讨论的都是ipv4的地址.ipv4的地址都是32位的,其实已经用完了,所以现在才有了ipv6.

ip地址并不是真正指向主机的,而是指向一个网络接口,就比如说路由器有多个网络接口,所以就有多个ip地址.

### 分类寻址(classful addresing)

ip地址一共有五类,如下图所示,但是仅仅划分了网络号和主机号还是不够,就比如说我192.168.0.1 这个ip地址究竟是哪一类网络呢?

为了可以从ip地址本身就能看出来分类,人们规定,

1. A类地址开头必须是0,主机范围就变成了  1.0.0.0 ~ 127.255.255.255

2. B类地址开头必须是10,主机范围就变成了  128.0.0.0 ~ 191.255.255.255

3. C类地址开头必须是110,主机范围就变成了  192.0.0.0 ~ 223.255.255.255

4. D类地址开头必须是1110,主机范围就变成了  224.0.0.0 ~ 239.255.255.255

5. E类地址开头必须是1111,主机范围就变成了  240.0.0.0 ~ 255.255.255.255

   **注意:主机地址全0代表本地地址,全1代表广播地址,别给自己用**

   

   

![img](img/timg)

### 特殊的ip地址

127.0.0.1     本地环回地址

169.254.0.0   代表baiDHCP获取失败，是windows默认分配的一个地址

### 子网掩码(subnet mask)

子网掩码是用来帮助计算机确定网段的,你主机ip的网络号有几个字节,就写几个255.

比如说 假设你主机的ip是192.168.1.1 这个是c类网络,那么子网掩码就是 255.255.255.0 .

|          |                 二进制                  |    十进制     |
| :------: | :-------------------------------------: | :-----------: |
|    ip    | 1100 0000.1010 1000.0000 0001.0000 0001 |  192.168.1.1  |
| 子网掩码 | 1111 1111.1111 1111.1111 1111.0000 0000 | 255.255.255.0 |
|  网络号  | 1100 0000.1010 1000.0000 0001.0000 0000 |  192.168.1.0  |

之后子网掩码和你ip地址按位与,算下来的结果就是你的网络号,很好理解,因为后面你主机号的地方子网掩码全都是0,保证完整保留你的网络号,以便判断你在哪个网段.

为什么要有这个子网掩码呢?可以设想,假如你想与隔壁王大叔家ping一下,那么这时计算机就会把你的ip和子网掩码做**按位与运算**,结果就是192.168.1.0.

假如王大叔家里面主机ip是 192.168.2.1 ,他家子网掩码也是 255.255.255.0 .一计算发现结果是 192.168.2.0.很明显和你家计算结果不一样,那么就不在一个网段,ping不通.

假如很不幸,他家ip是 192.168.1.123 ,那么一计算刚好也是192.168.1.0 说明他家和你家是一个网段.那你可能需要去看看咋回事了.

总结一下,子网掩码按位与你的主机ip就可以来判断你家的网段.

### 子网划分

有了上面的基础,现在我们就可以来进行一些实用的操作了.

假如你穿越到了二次元后宫动漫中,你家分到了一个B类网络 : 128.196.0.0 ,好家伙这一下子你就傻眼了,因为这个网段里面足够容下65,535这么多个ip,而你所有后宫,加上你城堡里面打杂的史莱姆总人数都不到10,000人 ,这一下子多出来这么多怎末能合理使用呢?

这时候隔壁标准跑龙套的神圣帝国派来了一个使者,他说啊,他们国家人数众多,眼看着ip就要分完了,能不能分给他们几个啊?你刚想拒绝,使者又补充到,如果事成,老国王愿意把金发傲娇萝莉公主也送到你的后宫里面.

虽然萝莉不萝莉不重要,但是如何划分ip引起了你的注意,假如说把你这个网段的ip直接划分过去,那么也就是说你和几公里之外的那些村民们不得不使用同一个网段,先不说同一个网段配置多个路由器很麻烦,主要是你一个子网之间可以直接通信,你这边隐私的小天地岂不是分分钟被暴露出去吗?也就是说你需要找到一个把你这个网段划分成不同子网的办法.

 其实方法很简单,只要网络号相同,就在一个网段,B类网络前16位是网络号,这16位是人家给你定死的,但是假如我强行把网络号看作17位呢?也就是说从主机号那里抢过来一位,那么此时你的网络号就有这么两个了.

|                   |                   二进制                    |    十进制     |
| :---------------: | :-----------------------------------------: | :-----------: |
|  原来的网段起点   | **1000 0000.1100 0100**.0000 0000.0000 0000 |  128.196.0.0  |
| 现在1号网段的起点 | **1000 0000.1100 0100.0**000 0000.0000 0000 |  128.196.0.0  |
| 现在2号网段的起点 | **1000 0000.1100 0100.1**000 0000.0000 0000 | 128.196.128.0 |

ps:加粗的为网络号,可以看到,这种划分方式抢走了一位主机号,但是多出来一个网段.

也就是说,之前你的ip范围是 128.196.0.0 ~ 128.196.255.255

现在被划分成立两个 第一个ip范围是  128.196.0.0 ~ 128.196.127.255

第二个ip范围是  128.196.128.0 ~ 128.196.255.255

这样子,你通过多写一位主机号划分了两个网段.

但是还没有结束,此时主机号已经发生了改变,子网掩码也要相应变化,

还记得子网掩码的作用吗?就是通过子网掩码按位与ip地址来判断网络号,现在网络号多了一位,子网掩码也要往后面加一个1,二进制后面多一个1,整体就大128.(毕竟是点分十进制嘛)

|          |                   二进制                    |    十进制     |
| :------: | :-----------------------------------------: | :-----------: |
|    ip    | **1000 0000.1100 0100.1**000 0000.0000 0001 | 128.196.128.1 |
| 子网掩码 | **1111 1111.1111 1111.1**000 0000.0000 0000 | 255.255.128.0 |
|  网络号  | **1000 0000.1100 0100.1**000 0000.0000 0000 | 128.196.128.0 |

注意:这个ip无所谓的,毕竟同一个网段下面谁配这个结果都一样.

好啦,你经过一番操作之后,终于配好了两个网段,老国王也没有食言,把他金发傲娇萝莉送了过来.

"才,才不是因为想和你一起学网络技术,才答应当你后宫的呢!!"

就这样,你和你的后宫们继续快乐地生活在二次元的世界里面.(完)........(并没有)

### 超网

### ip地址与mac地址

ip地址决定了数据最终的目的地,而mac地址决定了路由下一跳的目的地

## ARP协议

地址解析协议(Address Resolution Protocol)简称ARP,可以把一个ip地址解析为mac地址.

查看本机arp 

```shell
arp -a
```

### 工作流程



## DHCP协议

### 功能概述

动态主机配置协议(Dynamic Host Configuration Protocol)简称DHCP,DHCP其实是一个应用层的协议,主要作用是集中的管理、分配IP地址.

接下来我来翻译成人话.有一天,你回到家,发现后宫们纷纷都在抱怨ip地址不够用,这怎么可能?你家网段有65,535个ip位,虽然现在家里人口也暴增了不少,但是总人数也没有6万啊.这时你一问才知道,原来ip虽然够用,但是你不知道到底是哪个ip还空缺着.

有的人用了128.196.0.1 发现被占用,然后又随便换了一个128.196.123.101 这下可以用了.接下来所有人都这样子给自己划ip,很快就彻底乱了,谁也不知道到底还剩下哪个ip空缺着.

最可怕的是,隔壁王国的使团前几天来访,连wifi的时候,每个人都给自己划分了一个ip,但是现在他们人走了,但是ip没还回来,这下就导致资源不够用了,而且之前自己后宫用的几个ip不注意也被人家抢走了.

也就是说,你现在需要设计一个协议,至少满足以下功能.

1. 自动管理,分配ip,确保一个ip地址分配给一台主机

2. 可以分配临时ip,一旦时间到期,或者主机放弃该ip,那么该ip可以重新使用

3. 可以分配永久ip,可以让后宫不用担心超时或者离开后ip被占用.

于是你就构思出来这么一套流程.

### 工作流程

1. 主机广播DHCP发现报文
2. DHCP服务器广播DHCP提供报文,拟分配ip
3. 主机广播DHCP请求报文
4. DHCP服务器广播DHCP确认报文

这套流程解释起来就是,

1. 首先想要ip的主机需要先广播一下"谁有多余ip啊,给我分一个啊!!!!"
2. 然后负责分配DHCP的服务器响应:"我这有一个空余的,你要不要,要了我就给你了?"
3. 主机广播请求报文:"要要要,gkd,这ip是我的了,其他兄弟们别跟我用混了"
4. DHCP服务器广播:"好嘞,我已经把ip给他了,其他人别问我要这个ip喽."

## ICMP协议

![image-20200905132714980](img/image-20200905132714980.png)

# 4.传输层

# 5.应用层

## 网络应用模型

### 客户/服务器模型

也就是Client-Server(C/S)结构

服务器:提供计算服务的设备。

   1. 一直开机

   2. 具有永久性的访问地址/域名

客户机:请求计算服务的主机。

1. 与服务器通信，使用服务器提供的服务
2. 间歇性接入网络
3. 可能使用动态IP地址
4. 不能与其他客户机直接通信,必须经过服务器

### P2P模型

1. 不存在永远在线的服务器
2. 每个主机既可以提供服务，也可以请求服务
3. 任意端系统/节点之间可以直接通讯
4. 节点间歇性接入网络
5. 节点可能改变IP地址
6. 网络健壮性强

## DNS

域名系统 (Domain Name System) 简称DNS

将一个域名解析成ip地址

## HTTP

# 闫辰祥/2019/10/1